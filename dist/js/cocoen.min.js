!function(t,e,i,n){function s(e,i){this.options=t.extend({},h,i),this.$element=t(e),this.init()}e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}();var o="cocoen",h={dragElementSelector:".cocoen__drag"};s.prototype={init:function(){this.$before=this.$element.find("div:first-child"),this.$beforeImg=this.$before.find("img"),this.$dragElement=this.$element.find(this.options.dragElementSelector),this.dragWidth=this.$dragElement.outerWidth(),this.containerWidth=this.$element.outerWidth(),this.containerOffset=this.$element.offset().left,this.minLeftPos=this.containerOffset+10,this.maxLeftPos=this.containerOffset+this.containerWidth-this.dragWidth-10,this.dragging=!1,this.setDimensions(),this.addEventListeners()},addEventListeners:function(){this.$element.on("mousedown touchstart",this.options.dragElementSelector,this.onDragStart.bind(this)),this.$element.on("mouseup touchend touchcancel",this.options.dragElementSelector,this.onDragEnd.bind(this)),this.$element.on("mousemove touchmove",this.onDrag.bind(this)),t(e).on("resize",this.setDimensions.bind(this))},onDragStart:function(t){t.preventDefault();var e=t.pageX?t.pageX:t.originalEvent.touches[0].pageX;this.posX=this.$dragElement.offset().left+this.dragWidth-e,this.dragging=!0},onDragEnd:function(t){t.preventDefault(),this.dragging=!1},onDrag:function(t){t.preventDefault(),this.dragging&&(this.moveX=t.pageX?t.pageX:t.originalEvent.touches[0].pageX,requestAnimationFrame(this.drag.bind(this)))},drag:function(){this.leftPos=this.moveX+this.posX-this.dragWidth,this.leftPos<this.minLeftPos?this.leftPos=this.minLeftPos:this.leftPos>this.maxLeftPos&&(this.leftPos=this.maxLeftPos);var t=100*(this.leftPos+this.dragWidth/2-this.containerOffset)/this.containerWidth+"%";this.$dragElement.css("left",t),this.$before.css("width",t)},setDimensions:function(){this.$beforeImg.css("width",this.$element.width())}},t.fn[o]=function(e){return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new s(this,e))})}}(jQuery,window,document);